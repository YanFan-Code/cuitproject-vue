{"remainingRequest":"E:\\VSProject\\电商管理\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\VSProject\\电商管理\\vue\\src\\components\\record.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\VSProject\\电商管理\\vue\\src\\components\\record.vue","mtime":1582004208682},{"path":"E:\\VSProject\\电商管理\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\VSProject\\电商管理\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\VSProject\\电商管理\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\VSProject\\电商管理\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2dldHJlY29yZCxnZXRyZWNvcmRieWRhdGV9IGZyb20gJy4vbmV0d29yay9yZWNvcmQnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJyZWNvcmQiLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICByZWNvcmRzOltdLA0KICAgICAgZGF0ZTonJywNCiAgICAgIHBhZ2U6ew0KICAgICAgICBub3dyZWNvcmQ6W10sDQogICAgICAgIHBhZ2VzaXplOjUsDQogICAgICAgIHBhZ2Vub3c6MSwNCiAgICAgICAgdG90YWxyZWNvcmQ6MA0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICB9LA0KICBjcmVhdGVkOiBhc3luYyBmdW5jdGlvbigpew0KICAgIGF3YWl0IGdldHJlY29yZCh0aGlzLiRzdG9yZS5zdGF0ZS5lbXBsb3llZUlkKS50aGVuKCByZXMgPT4gew0KICAgICAgdGhpcy5yZWNvcmRzID0gcmVzDQogICAgICB0aGlzLnBhZ2UudG90YWxyZWNvcmQgPSByZXMubGVuZ3RoDQogICAgICB0aGlzLmNoYW5nZXJlY29yZCh0aGlzLnBhZ2UucGFnZW5vdyx0aGlzLnBhZ2UucGFnZXNpemUpDQogICAgfSkNCiAgfSwNCiAgbWV0aG9kczp7DQogICAgLy/muIXpmaTml6XmnJ8NCiAgICBhc3luYyBjYW5jZWxkYXRlKCl7DQogICAgICB0aGlzLmRhdGUgPSAnJw0KICAgICAgYXdhaXQgZ2V0cmVjb3JkKHRoaXMuJHN0b3JlLnN0YXRlLmVtcGxveWVlSWQpLnRoZW4oIHJlcyA9PiB7DQogICAgICB0aGlzLnJlY29yZHMgPSByZXMNCiAgICAgIHRoaXMucGFnZS50b3RhbHJlY29yZCA9IHJlcy5sZW5ndGgNCiAgICAgIHRoaXMucGFnZXNpemUgPSA1DQogICAgICB0aGlzLnBhZ2Vub3cgPSAxDQogICAgICB0aGlzLmNoYW5nZXJlY29yZCh0aGlzLnBhZ2UucGFnZW5vdyx0aGlzLnBhZ2UucGFnZXNpemUpDQogICAgfSkNCiAgICB9LA0KICAgIC8v5qC55o2u5L+u5pS555qEc2l6ZeaUueWPmOihqOagvA0KICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7DQogICAgICBjb25zb2xlLmxvZyhg5q+P6aG1ICR7dmFsfSDmnaFgKTsNCiAgICAgIHRoaXMucGFnZS5wYWdlc2l6ZSA9IHZhbDsNCiAgICAgIHRoaXMuY2hhbmdlcmVjb3JkKHRoaXMucGFnZS5wYWdlbm93LHRoaXMucGFnZS5wYWdlc2l6ZSkNCiAgICB9LA0KICAgIC8v5qC55o2u5L+u5pS555qEcGFnZW5vd+aUueWPmOihqOagvA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7DQogICAgICBjb25zb2xlLmxvZyhg5b2T5YmN6aG1OiAke3ZhbH1gKTsNCiAgICAgIHRoaXMucGFnZS5wYWdlbm93ID0gdmFsOw0KICAgICAgdGhpcy5jaGFuZ2VyZWNvcmQodGhpcy5wYWdlLnBhZ2Vub3csdGhpcy5wYWdlLnBhZ2VzaXplKQ0KICAgIH0sDQogICAgY2hhbmdlcmVjb3JkKHBhZ2Usc2l6ZSl7DQogICAgICBsZXQgbmV3cmVjb3JkcyA9IFsuLi50aGlzLnJlY29yZHNdDQogICAgICB0aGlzLnBhZ2Uubm93cmVjb3JkID0gbmV3cmVjb3Jkcy5zcGxpY2Uoc2l6ZSoocGFnZS0xKSxzaXplKQ0KICAgICAgLy8gY29uc29sZS5sb2cobmV3cmVjb3JkcykNCiAgICB9LA0KICAgIC8v6I635b6X6I635Y+W55qE5pel5pyfDQogICAgYXN5bmMgY2hhbmdlKCl7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGUpDQogICAgICBhd2FpdCBnZXRyZWNvcmRieWRhdGUodGhpcy4kc3RvcmUuc3RhdGUuZW1wbG95ZWVJZCx0aGlzLmRhdGUpLnRoZW4oIHJlcyA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKHJlcykNCiAgICAgIHRoaXMucmVjb3JkcyA9IHJlcw0KICAgICAgdGhpcy5wYWdlLnRvdGFscmVjb3JkID0gcmVzLmxlbmd0aA0KICAgICAgdGhpcy5wYWdlc2l6ZSA9IDUNCiAgICAgIHRoaXMucGFnZW5vdyA9IDENCiAgICAgIHRoaXMuY2hhbmdlcmVjb3JkKHRoaXMucGFnZS5wYWdlbm93LHRoaXMucGFnZS5wYWdlc2l6ZSkNCiAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["record.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"record.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div id=\"record\">\r\n       <!-- 置顶面包屑 -->\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n            <el-breadcrumb-item :to=\"{ path: '/loginin' }\">首页</el-breadcrumb-item>\r\n            <el-breadcrumb-item>个人主页</el-breadcrumb-item>\r\n            <el-breadcrumb-item>个人日志</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n\r\n        <el-table :data=\"page.nowrecord\" stripe border \r\n      style=\"width: 100%\">\r\n      <el-table-column\r\n        prop=\"startDay\"\r\n        label=\"开始时间\" width=\"440\">\r\n        <template slot=\"header\" slot-scope=\"scope\">\r\n        <el-date-picker\r\n      v-model=\"date\"\r\n      type=\"date\"\r\n      value-format=\"yyyy-MM-dd\"\r\n      @change=\"change\"\r\n      placeholder=\"选择日期\">\r\n    </el-date-picker>\r\n    <el-button type=\"primary\" @click=\"canceldate\">重置</el-button>\r\n      </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"endDay\"\r\n        label=\"结束时间\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"place\"\r\n        label=\"地点\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"cost\"\r\n        label=\"报销\"\r\n        width=\"180\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"type\"\r\n        label=\"类型\"\r\n        width=\"180\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"detail\"\r\n        label=\"具体描述\">\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页 -->\r\n        <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :page-sizes=\"[5, 10, 15, 20]\"\r\n      :page-size=\"1\"\r\n      align=\"center\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"page.totalrecord\">\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/javascript\">\r\nimport {getrecord,getrecordbydate} from './network/record'\r\nexport default {\r\n  name: \"record\",\r\n  data() {\r\n    return {\r\n      records:[],\r\n      date:'',\r\n      page:{\r\n        nowrecord:[],\r\n        pagesize:5,\r\n        pagenow:1,\r\n        totalrecord:0\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n  },\r\n  created: async function(){\r\n    await getrecord(this.$store.state.employeeId).then( res => {\r\n      this.records = res\r\n      this.page.totalrecord = res.length\r\n      this.changerecord(this.page.pagenow,this.page.pagesize)\r\n    })\r\n  },\r\n  methods:{\r\n    //清除日期\r\n    async canceldate(){\r\n      this.date = ''\r\n      await getrecord(this.$store.state.employeeId).then( res => {\r\n      this.records = res\r\n      this.page.totalrecord = res.length\r\n      this.pagesize = 5\r\n      this.pagenow = 1\r\n      this.changerecord(this.page.pagenow,this.page.pagesize)\r\n    })\r\n    },\r\n    //根据修改的size改变表格\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n      this.page.pagesize = val;\r\n      this.changerecord(this.page.pagenow,this.page.pagesize)\r\n    },\r\n    //根据修改的pagenow改变表格\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n      this.page.pagenow = val;\r\n      this.changerecord(this.page.pagenow,this.page.pagesize)\r\n    },\r\n    changerecord(page,size){\r\n      let newrecords = [...this.records]\r\n      this.page.nowrecord = newrecords.splice(size*(page-1),size)\r\n      // console.log(newrecords)\r\n    },\r\n    //获得获取的日期\r\n    async change(){\r\n      console.log(this.date)\r\n      await getrecordbydate(this.$store.state.employeeId,this.date).then( res => {\r\n        console.log(res)\r\n      this.records = res\r\n      this.page.totalrecord = res.length\r\n      this.pagesize = 5\r\n      this.pagenow = 1\r\n      this.changerecord(this.page.pagenow,this.page.pagesize)\r\n    })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-button{\r\n  margin-left: 10px;\r\n}\r\n</style>\r\n"]}]}